{% macro dlIndexList(params) %}
<div class="dl-index-grid{% if params.classes %} {{ params.classes }}{% endif %}">
{%- for item in params['items'] -%}

{%- set ns = namespace(item_ref="", item_text="") %}

{#- figure out what to use as reference -#}
{%- if item['reference'] -%}
  {% set ns.item_ref = item['reference'] %}
{%- else -%}
  {% set ns.item_ref = item['slug']|clean_slug %}
{%- endif -%}

{#- figure out what to use as the text/name -#}
{%- if item['site'] -%}
  {% set ns.item_text = item['site'] %}
  {%- if item['site-address'] -%}
    {% set ns.item_text = ns.item_text + ", " + item['site-address'] %}
  {%- endif -%}
{%- elif item['name'] -%}
  {% set ns.item_text = item['name'] %}
{%- else -%}
  {% set ns.item_text = item['text'] %}
{%- endif -%}

  <h4 class="dl-index-item__head govuk-heading-s govuk-!-font-weight-regular dl-break-word"><a class="govuk-link" href="{{ item['href'] }}">{{ ns.item_ref }}</a></h4>
  <p class="dl-index-item__body govuk-body">{{ ns.item_text }}</p>
{%- endfor -%}
</div>
{% endmacro %}